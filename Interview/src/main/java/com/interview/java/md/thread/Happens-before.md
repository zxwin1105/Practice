Java中除了synchronized和volatile来保证有序性外，JVM还规定了先行发生原则，让一个操作无需控制就能先于另一个操作完成。

## Happens-Before规则

1. 单一线程原则

在一个线程内，在程序前面的操作先行发生于后面的操作

2. 管程锁定规则

一个unlock操作先行发生于后面对同一个锁的lock操作

3. volatile变量规则

对一个volatile变量的写操作先行发生于后面对这个变量的读操作

4. 线程启动规则

Thread对象的start()方法调用先行发生于此线程的任何操作

5. 线程加入规则

Thread对象的结束先行发生于join()方法返回

6. 线程中断规则

对线程interrupt()方法的调用先行发生于被中断线程的代码检测到中断事件的发生，可以通过interrupted()方法检测到是否有中断发生

7. 对象终结规则

一个对象的初始化完成（构造函数执行结束）先行发生于它的finalize()方法的开始

8. 传递性

如果操作A先行发生于操作B，操作B先行发生于操作C，那么操作A先行发生于操作C